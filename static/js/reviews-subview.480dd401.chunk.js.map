{"version":3,"sources":["services/stylesPagination.js","views/Reviews/Reviews.module.css","../node_modules/react-simple-show-more/es/index.js","views/Reviews/Reviews.js"],"names":["useStyles","makeStyles","root","display","justifyContent","backgroundColor","color","opacity","module","exports","_class","_temp","ShowMore","_Component","props","instance","Constructor","TypeError","_classCallCheck","this","_this","self","call","ReferenceError","_possibleConstructorReturn","shouldTruncateString","string","length","parseInt","truncatedString","slice","split","join","toggleShowMore","event","preventDefault","setState","prevState","showMore","state","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","render","_props","text","enabled","className","style","ellipsis","showMoreLabel","showLessLabel","Tag","tag","React","createElement","Fragment","onClick","Component","defaultProps","cursor","propTypes","Reviews","movieId","useParams","slug","match","classes","history","useNavigate","location","useLocation","useState","reviews","setReviews","totalPage","setTotalPage","error","setError","Status","IDLE","status","setStatus","page","URLSearchParams","search","get","useEffect","apiService","then","results","total_pages","toast","RESOLVED","catch","console","log","REJECTED","PENDING","LoaderComponent","ErrorView","message","map","review","s","item","author","content","fontWeight","id","Pagination","count","onChange","push","Number","showFirstButton","showLastButton","size"],"mappings":"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","file":"static/js/reviews-subview.480dd401.chunk.js","sourcesContent":["import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    '& .MuiPaginationItem-page.Mui-selected, & .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible,  & .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible': {\r\n      backgroundColor: '#fa7584',\r\n    },\r\n    '& .MuiPaginationItem-root': {\r\n      color: '#fff',\r\n    },\r\n    '& .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible': {\r\n      opacity: '0.7',\r\n    },\r\n    '& .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible': {\r\n      opacity: '1',\r\n    },\r\n    '& .MuiPagination-ul': {\r\n      justifyContent: 'center',\r\n    },\r\n  },\r\n});\r\n\r\nexport default useStyles;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Reviews_item__2X3wE\",\"author\":\"Reviews_author__GjFvy\",\"content\":\"Reviews_content__3Nq1Y\"};","var _class, _temp;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nvar ShowMore = (_temp = _class = function (_Component) {\n  _inherits(ShowMore, _Component);\n\n  function ShowMore(props) {\n    _classCallCheck(this, ShowMore);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.shouldTruncateString = function (string) {\n      return string.length > parseInt(_this.props.length);\n    };\n\n    _this.truncatedString = function (string) {\n      return string.slice(0, _this.props.length).split(' ').slice(0, -1).join(' ');\n    };\n\n    _this.toggleShowMore = function (event) {\n      if (event && event.preventDefault) event.preventDefault();\n      _this.setState(function (prevState) {\n        return { showMore: !prevState.showMore };\n      });\n    };\n\n    _this.state = {\n      showMore: false\n    };\n    return _this;\n  }\n\n  ShowMore.prototype.render = function render() {\n    var showMore = this.state.showMore;\n    var _props = this.props,\n        text = _props.text,\n        enabled = _props.enabled,\n        className = _props.className,\n        style = _props.style,\n        ellipsis = _props.ellipsis,\n        showMoreLabel = _props.showMoreLabel,\n        showLessLabel = _props.showLessLabel;\n\n    var Tag = this.props.tag;\n    if (enabled && this.shouldTruncateString(text)) {\n      return React.createElement(\n        React.Fragment,\n        null,\n        !showMore && '' + this.truncatedString(text) + ellipsis,\n        showMore && text,\n        React.createElement(\n          Tag,\n          {\n            className: className,\n            onClick: this.toggleShowMore,\n            style: style\n          },\n          showMore ? showLessLabel : showMoreLabel\n        )\n      );\n    }\n    return React.createElement(\n      React.Fragment,\n      null,\n      text\n    );\n  };\n\n  return ShowMore;\n}(Component), _class.defaultProps = {\n  enabled: true,\n  length: 170,\n  className: '',\n  tag: 'span',\n  style: {\n    cursor: 'pointer',\n    color: '#007bff'\n  },\n  ellipsis: '...',\n  showMoreLabel: ' Show more',\n  showLessLabel: ' Show less'\n}, _temp);\nShowMore.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  text: PropTypes.string.isRequired,\n  enabled: PropTypes.any,\n  length: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  className: PropTypes.string,\n  tag: PropTypes.string,\n  style: PropTypes.object,\n  ellipsis: PropTypes.string,\n  showMoreLabel: PropTypes.string,\n  showLessLabel: PropTypes.string\n} : {};\n\n\nexport default ShowMore;","import { useState, useEffect } from 'react';\r\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\r\nimport * as apiService from '../../services/apiService';\r\nimport ShowMore from 'react-simple-show-more';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Pagination } from '@material-ui/lab';\r\nimport useStyles from '../../services/stylesPagination';\r\nimport Status from '../../services/status';\r\nimport LoaderComponent from '../../components/LoaderComponent/LoaderComponent';\r\nimport ErrorView from '../../components/ErrorView/ErrorView';\r\nimport s from './Reviews.module.css';\r\n\r\nfunction Reviews() {\r\n  const { slug } = useParams();\r\n  const movieId = slug.match(/[a-z0-9]+$/)[0];\r\n  const classes = useStyles();\r\n  const history = useNavigate();\r\n  const location = useLocation();\r\n  const [reviews, setReviews] = useState(null);\r\n  const [totalPage, setTotalPage] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [status, setStatus] = useState(Status.IDLE);\r\n\r\n  const page = new URLSearchParams(location.search).get('page') ?? 1;\r\n\r\n  useEffect(() => {\r\n    apiService\r\n      .getMovieReviews(movieId, page)\r\n      .then(({ results, total_pages }) => {\r\n        if (results.length === 0) {\r\n          toast.error(\"ðŸ’© We don't have any reviews for this movie.\");\r\n          setStatus(Status.IDLE);\r\n          return;\r\n        }\r\n        setReviews(results);\r\n        setTotalPage(total_pages);\r\n        setStatus(Status.RESOLVED);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        setError('Something went wrong. Try again.');\r\n        setStatus(Status.REJECTED);\r\n      });\r\n  }, [movieId, page]);\r\n\r\n  const onHandlePage = (event, page) => {\r\n    history.push({ ...location, search: `page=${page}` });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {status === Status.PENDING && <LoaderComponent />}\r\n\r\n      {status === Status.REJECTED && <ErrorView message={error} />}\r\n\r\n      {status === Status.RESOLVED && (\r\n        <>\r\n          <ul>\r\n            {reviews.map(review => (\r\n              <li key={review.id} className={s.item}>\r\n                <h4 className={s.author}>Author: {review.author}</h4>\r\n                <p className={s.content}>\r\n                  <ShowMore\r\n                    text={review.content}\r\n                    length={700}\r\n                    showMoreLabel=\" Show more >>\"\r\n                    showLessLabel=\" Show less <<\"\r\n                    style={{\r\n                      cursor: 'pointer',\r\n                      color: '#fa7584',\r\n                      fontWeight: 'bold',\r\n                    }}\r\n                  />\r\n                </p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          {totalPage > 1 && (\r\n            <Pagination\r\n              className={classes.root}\r\n              count={totalPage}\r\n              onChange={onHandlePage}\r\n              page={Number(page)}\r\n              showFirstButton\r\n              showLastButton\r\n              size=\"large\"\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Reviews;\r\n"],"sourceRoot":""}